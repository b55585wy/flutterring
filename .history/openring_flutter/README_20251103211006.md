# 🔬 OpenRing Flutter - 科研版

**专业生理信号采集与分析工具**

> **目标用户**: 生理信号研究人员、算法开发者、医学实验研究者  
> **核心目标**: 可靠的数据采集、精确的算法验证、完整的实验记录

---

## ✨ 科研版特性

### 🎯 **专业数据采集**
- 12 通道实时波形（PPG×3, ACC×3, Gyro×3, Temp×3）
- 完整数据导出（CSV + 原始格式）
- 采样率与时间戳记录
- 数据完整性校验

### 📊 **核心功能**
- **仪表盘**: 设备状态、快速启动、最近实验
- **实时测量**: 多通道波形、算法验证、实时标注
- **离线录制**: 精确控制、自动下载、文件管理
- **历史记录**: 详细统计、批量导出、数据筛选
- **设置中心**: 算法参数、导出设置、实验管理

---

## 🚀 已完成

### ✅ **UI 组件**
- [x] 底部导航栏（带动画高亮）
- [x] 仪表盘页面
  - [x] 渐变欢迎卡片
  - [x] 快速统计数据
  - [x] 快速操作按钮
  - [x] 连接状态显示
- [x] 测量页面
  - [x] 数据源选择器
  - [x] 生理指标卡片（心跳动画）
  - [x] 信号质量指示器
  - [x] 三通道波形图
  - [x] 控制按钮
- [x] 历史页面
  - [x] 统计摘要
  - [x] 记录列表
- [x] 设置页面
  - [x] 分组设置项
  - [x] 设备管理
  - [x] 数据管理

### ✅ **技术栈**
- Flutter 3.24.5
- Dart 3.5.4
- flutter_riverpod (状态管理)
- go_router (路由)
- fl_chart (图表)
- intl (国际化)

---

## 🎨 UI 预览

### **仪表盘**
```
┌─────────────────────────────────┐
│  🔔  OpenRing                   │
├─────────────────────────────────┤
│  [渐变卡片]                      │
│   早上好！                       │
│   开始今天的健康监测              │
│   ❤️ 心率: -- BPM  🫁 呼吸: --  │
├─────────────────────────────────┤
│  快速操作                        │
│  [开始测量] [查看历史]           │
│  [戒指设置] [数据导出]           │
├─────────────────────────────────┤
│  [连接状态卡片]                  │
│  🔴 戒指未连接 [扫描]            │
└─────────────────────────────────┘
```

### **测量页面**
```
┌─────────────────────────────────┐
│  ← 实时测量                 ⋮   │
├─────────────────────────────────┤
│  [数据源选择]                    │
│  📡 实时测量（在线）  ▼          │
├─────────────────────────────────┤
│  ❤️ 心率      🫁 呼吸率          │
│   72 BPM      16 RPM            │
│  [信号质量: 优秀 ▓▓▓▓▓▓▓▓]       │
├─────────────────────────────────┤
│  实时波形                        │
│  ╱╲╱╲ PPG Green                │
│  ╱╲╱╲ PPG Red                  │
│  ╱╲╱╲ PPG IR                   │
├─────────────────────────────────┤
│  [▶ 开始测量]                   │
└─────────────────────────────────┘
```

---

## 📱 运行应用

### **启动模拟器**
```bash
flutter emulators --launch Medium_Phone_API_35
```

### **运行应用**
```bash
cd openring_flutter
flutter run -d emulator-5554
```

### **热重载**
```
r - 热重载
R - 热重启
q - 退出
```

---

## 🎯 科研版开发计划

### **阶段 1: 数据采集增强** (当前)
- [ ] 实现 12 通道完整显示
- [ ] 添加通道选择器
- [ ] 实现波形缩放/平移控制
- [ ] 添加采样统计信息（采样率、数量、时长）

### **阶段 2: 离线录制优化**
- [ ] 精确时长控制（1-3600秒）
- [ ] 录制状态详细监控
- [ ] 文件管理增强（批量操作）
- [ ] 自动/手动下载选项

### **阶段 3: 数据导出与分析**
- [ ] CSV 导出（完整 12 通道 + 元数据）
- [ ] 批量导出历史记录
- [ ] 波形标注工具
- [ ] 数据质量报告

### **阶段 4: 实验管理**
- [ ] 受试者信息管理
- [ ] 实验项目组织
- [ ] 协议自动执行
- [ ] 算法参数调节界面

---

## 🎨 设计特点

### **配色方案**
- **主色**: Indigo (#6366F1)
- **成功**: Green (#10B981)
- **警告**: Amber (#F59E0B)
- **危险**: Red (#EF4444)
- **信息**: Blue (#3B82F6)
- **紫色**: Purple (#8B5CF6)

### **设计元素**
- 圆角: 12-20px
- 阴影: 柔和阴影
- 间距: 16-24px
- 字体: SF Pro / 系统默认

### **动画**
- 心跳动画（测量中）
- 导航栏切换动画
- 波形实时绘制
- 按钮点击反馈

---

## 📂 项目结构

```
lib/
├── main.dart                 # 应用入口
├── presentation/             # UI 层
│   ├── dashboard/home_page.dart
│   ├── measurement/measurement_page.dart
│   ├── history/history_page.dart
│   └── settings/settings_page.dart
├── application/              # 控制器 / UseCase（规划中）
│   └── README.md
├── domain/
│   └── models/               # Freezed 数据模型
└── infrastructure/
    └── platform/ring_platform.dart # 平台通道接口
```

---

## 🛠️ 技术栈

| 组件 | 版本 | 用途 |
|------|------|------|
| Flutter | 3.24.5 | UI 框架 |
| Dart | 3.5.4 | 编程语言 |
| flutter_riverpod | ^2.6.1 | 状态管理 |
| go_router | ^14.8.1 | 路由管理 |
| fl_chart | ^0.68.0 | 图表绘制 |
| intl | ^0.19.0 | 国际化 |
| logger | ^2.2.0 | 日志 |

---

## 🎉 当前状态

✅ **基础 UI 完成** - 主要页面框架已实现  
🔄 **科研功能开发中** - 正在添加专业工具  
⏳ **待完成** - 数据导出、标注工具、实验管理

---

## 📖 相关文档

- **[RESEARCH_VS_CONSUMER.md](RESEARCH_VS_CONSUMER.md)** - 科研版 vs 消费者版策略
- **[FEATURES.md](FEATURES.md)** - 详细功能特性
- **[NEXT_STEPS.md](NEXT_STEPS.md)** - 开发路线图

---

**专业工具，可靠数据，为科研服务！** 🔬
