# M1 关键界面原型草稿

> 目标：在保持现有 UI 风格的基础上，明确 Controller 化后各页面需要展示的关键信息与交互。

## 1. Dashboard（仪表盘）

### 布局概览

1. **顶部状态条**
   - 左侧：当前连接状态图标（绿色连接、灰色断开）。
   - 中间：设备名称 / MAC（连接时显示），未连接时显示“未连接”。
   - 右侧：电量百分比（P1 可用，M1 可用硬编码/隐藏）。

2. **实时指标卡片**
   - 心率：大号数字 + 单位 BPM
   - 呼吸率：数字 + RPM
   - 信号质量：颜色标签（优秀/良好/一般/差/无信号）

3. **操作区**
   - 主要按钮：`开始测量`（进入测量页面）
   - 次要按钮：`扫描设备`（弹出设备列表底部弹窗）
   - 提示文案：当前测量状态（例如“未测量”/“测量中”）

### 交互说明

- `扫描设备` → 触发 `BleScanController.startScan`，弹窗实时显示列表。
- 列表项点击 → 调用 `DeviceConnectionController.connect`。
- 顶部状态条实时响应 `connectionState` Provider。
- 右上角可预留设置入口（跳转 Settings）。

## 2. 设备扫描弹窗

### 元素

- 标题：`可用设备`
- 列表：`设备名称 / MAC / RSSI`，按 RSSI 降序
- 切换：`扫描中` 显示 loading；完成后显示“扫描完成，可重新扫描”
- 底部按钮：`重新扫描`（触发 `startScan`）、`关闭`

### 状态

- 空状态：图标 + `未找到设备，点击重新扫描`
- 连接中：被选中项显示 loading（右侧 spinner）
- 连接失败：toast 提示 + 列表保留在弹窗内

## 3. 测量页面

### 布局原型

1. **标题区域**：显示连接设备名称 + 状态
2. **倒计时/进度条**：显示剩余时间
3. **实时波形占位（M1 可暂用占位图）**
4. **指标卡片**：心率、呼吸率、信号质量（与 Dashboard 保持一致）
5. **操作按钮**：
   - `开始测量`（首次）/`停止测量`
   - 旁边放置时长选择按钮（30 / 60 / 120 / 自定义）
6. **底部提示**：测量完成后提示“数据已缓存，可在导出页查看”。

### 交互

- 选择时长 → 更新内部状态，不立即触发测量。
- `开始测量` → 触发 `MeasurementController.start(duration)`；按钮变为 `停止测量`。
- 倒计时结束自动调用 `stop()` 并弹出通知条。

## 4. 设置页面

### 模块

1. **连接状态**：读取 `DeviceConnectionController` 提供的状态。
2. **设备信息**：显示名称/MAC；预留固件版本、电量位置。
3. **权限状态**：显示蓝牙/定位权限，提供跳转到系统设置（M1 可提示文字）。
4. **调试入口**：链接到日志导出（P1）。

### 调性

- 采用列表分组，每组标题清晰。
- 可插入“如何重新配对设备”帮助链接。

## 5. 低保真草稿（描述）

建议使用简易线框工具（Figma/Wireframe.cc）快速拉出以下页面：

- Dashboard 主视图
- 设备扫描弹窗
- 测量页面
- 设置页面

如暂时无法绘图，可按上述描述在纸上勾勒，并拍照存档在 `ux/` 目录。

## 6. 设计待定事项（To Clarify）

- 波形区域在 M1 是否展示？若无真实数据，可用占位图/提示文案。
- 设置页内是否加入“数据导出路径”配置（属于 P1 功能）。
- 断开连接的入口放在顶部状态条还是弹窗？（建议：顶部状态条提供 `断开` 按钮）

## 7. 下一步

1. 基于此草稿创建 Figma 低保真线框，链接写入 `ux/README.md`（待创建）。
2. 与技术实现对齐各控件依赖的 Provider/Controller，保证数据流一致。
3. 收集科研顾问的反馈，必要时在 M2 前调整交互细节。


